<!DOCTYPE html lang="ar">
<html dir="rtl" lang="ar">

<head>
    <title>صقر القاهرة-إدارة الموظفين </title>
    <meta charset="UTF-8">
    <meta name="description"
        content="شركة صقر هي شركة رائدة في مجال العقارات والمقاولات والتشطيبات الداخلية والخارجية والأمن والحراسة">
    <meta name="keywords" content="عقارات , مقاولات , أمن والحراسة , تشطيبات , النظافة , تأمين , صقر , القاهرة">
    <meta name="author" content="Saqr Elqahera">
    <link rel="icon" type="image/png" href="../images/saqr_logo-removebg-preview.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../css/bootstrap.css">
    <!-- <link rel="stylesheet" href="../css/Employee_Home_Page.css"> -->
    <link rel="stylesheet" href="../css/supervisor_stuff_management.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <!-- ? Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="../images/صقر-removebg-preview.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary ">
        <div class="container-fluid">
            <a class="navbar-brand" href="Staff_Management.html">
                <img src="../images/صقر-removebg-preview.png" alt="" width="40" height="32"
                    class="d-inline-block align-text-top">
                <span style="margin-right: 5px;padding-top: 2px;">
                    شركة صقر
                </span>

            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 navy">
                    <li class="nav-item ">
                        <a style="color: white;" class="nav-link ml-1 link text-light"
                            href="Staff_Management.html">الصفحة
                            الرئيسية</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a style="color: white;" class="nav-link dropdown-toggle  ml-1  link" href="#"
                            id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            القبض
                        </a>
                        <div class="dropdown-menu " aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="Rewards.html">المكافأت</a>
                            <a class="dropdown-item" href="Deduction.html">الجزه</a>
                            <a class="dropdown-item" href="Incentives.html"> الحوافز</a>
                            <a class="dropdown-item" href="granting.html"> المنح</a>
                            <a class="dropdown-item" href="Advance_paid.html"> السلف</a>
                            <a class="dropdown-item" href="Final salary.html"> صافي القبض النهائى</a>
                        </div>
                    </li>

                </ul>
                <ul class="navbar-nav  ">
                    <a href="personal_info.html" class="text-white me-4 p-1" id="profileIcon" data-bs-toggle="popover"
                        title="الصفحة الشخصية ">
                        <img class="pers" src="../images/sabry.jpeg" alt="personal page">
                    </a>
                </ul>


            </div>
        </div>
    </nav>
    <!-- End of navbar -->
    <!-- tabs -->

    <div class="container-fluid">

        <!-- التابات -->

        <!-- التابات -->
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">

                <ul class="nav nav-tabs tabbb tabtab " id="myTab" role="tablist" style="display: flex; width: 100%;">
                    <li class="nav-item">
                        <h3 style="margin-top: 10px; margin-right: 5px;padding-left: 2px;">مشرف الموقع</h3>
                    </li>
                    <!-- Navigation Tabs -->
                    <li class="nav-item" style="flex: 1; margin-top: 0px;">
                        <a class="nav-link active " id="tab-tab" data-toggle="tab" href="#tab1" role="tab"
                            aria-controls="tab1" aria-selected="true" onclick="redirectTostaffmanagement()">
                            إدارة الموظفين
                        </a>
                    </li>
                    <li class="nav-item" style="flex: 1; margin-top: 0px;">
                        <a 
                            class="nav-link navve" id="tab1-tab" data-toggle="tab" href="#tab1" role="tab"
                            aria-controls="tab1" aria-selected="true" onclick="redirectTohomeemployee()">
                            طلب سلفة
                        </a>
                    </li>
                    <li class="nav-item" style="flex: 1; margin-top: 0px;">
                        <a class="nav-link   " id="tab2-tab" data-toggle="tab" href="#tab2" role="tab"
                            aria-controls="tab2" aria-selected="false" onclick="redirectToSubmitcomplaint()">
                            تقديم شكوى
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </div>





    <div style="width: 100%;" class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab-tab">
            <!-- محتوى التبويب 1 -->
            <h2 class="h2title"> إدارة الموظفين
                <img src="../images/enterprise-architecture_17556475.gif" alt="Course Icon">
            </h2>
            <div class="column"> </div>
            <div class="container page">
                <div class="data  row mt-5 mb-5  ">
                    <!-- <form action=""> -->

                    <div class="row ">
                        <div class="input_name col-12">
                            <input class="col-12 form-control name scale" type="text" placeholder="الأسم" id="name">

                        </div>
                        <!-- select option -->
                        <div class="col-md-4 col-sm-12 mt-3">
                            <select id="location" style="font-size: 18px;" name="loaction" class="form-select scale"
                                aria-label="Default select example1">
                                <option selected>مكان التواجد</option>
                                <option value="1">الشركة</option>
                                <option value="2">اللوتس</option>
                                <option value="3">مجرى العيون</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-sm-12 mt-3">
                            <select id="attendance" style="font-size: 18px;" name="exist" class="form-select scale"
                                aria-label="Default select example2" onchange="toggleInput(this)">
                                <option selected>الحضور</option>
                                <option value="ex">تواجد</option>
                                <option value="abs">غياب</option>
                                <option value="mam">مأمورية</option>
                                <option value="re">أجازة</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-sm-12 mt-3">
                            <select id="job" style="font-size: 18px;" name="job" class="form-select scale"
                                aria-label="Default select example3">
                                <option selected>الوظيفة</option>
                                <option value="1">محاسب</option>
                                <option value="2">مهندس</option>
                                <option value="3">HR</option>
                                <option value="4">سوشيال ميديا</option>
                            </select>
                        </div>
                        <div class="col-md-4 col-sm-12 mt-3">
                            <input name="back" class="form-control back scale" type="date"
                                placeholder="العودة من الاجازة" title="العودة من الاجازة" disabled>


                        </div>
                        <div class="col-md-4 col-sm-12 mt-3">
                            <input name="rest" class="form-control rest scale" type="number" min="0"
                                placeholder="عدد أيام الاجازة الكلي" title="عدد أيام الاجازة الكلي" disabled>
                        </div>
                        <div class="col-md-4 col-sm-12 mt-3">
                            <input name="absence" class="form-control absence scale" type="number"
                                placeholder="عدد أيام الغياب" title="عدد أيام الغياب" disabled min="0">
                        </div>
                        <div class="col-md-6 col-sm-12 mt-3">
                            <select style="font-size: 18px;" name="sheft" class="form-select scale"
                                aria-label="Default select example3">
                                <option selected>شيفت</option>
                                <option value="1">صباحي</option>
                                <option value="2">مسائى</option>
                            </select>
                        </div>
                        <div class="col-md-6 col-sm-12 mt-3">
                            <select style="font-size: 18px;" name="department" class="form-select scale"
                                aria-label="Default select example3">
                                <option selected>قسم</option>
                                <option value="1">مقر الشركة</option>
                                <option value="2">الشئون الإدارية</option>
                                <option value="3">مديري ومشرفي التشغيل</option>
                                <option value="4">أفراد التشغيل</option>
                                <option value="5">مديرى الأمن</option>
                                <option value="6">مشرفى الأمن</option>
                                <option value="7">أفراد الأمن</option>
                            </select>
                        </div>
                        <!-- btn update -->
                        <div class=" update col-md-12 col-sm-12">
                            <button id="up_button" style="width: 100%;font-size: 20px;"
                                class="col-md-12 col-sm-12 mt-3 btn btn-outline-primary none  ">تعديل</button>

                        </div>
                        <!-- input search -->
                        <div class="search col-sm-12 mt-3">
                            <input class="form-control search scale" type="search" placeholder="البحث" id="search"
                                col-sm-12>

                        </div>
                        <!-- btn search -->
                        <div class="btn_search">
                            <div class=" b_search col-md-12 col-sm-12">
                                <button id="search_with_name" style="width: 100%;font-size: 20px;"
                                    class="col-md-12 col-sm-12 mt-3 btn btn-outline-primary b_search">البحث
                                    بالأسم</button>

                            </div>
                            <div class="b_search update col-md-12 col-sm-12">
                                <button id="search_with_job" style="width: 100%;font-size: 20px;"
                                    class="col-md-12 col-sm-12 mt-3 btn btn-outline-primary b_search">البحث
                                    بالوظيفة</button>

                            </div>
                            <div class="b_search update col-md-12 col-sm-12">
                                <button id="search_with_place" style="width: 100%;font-size: 20px;"
                                    class="col-md-12 col-sm-12 mt-3 btn btn-outline-primary b_search">البحث
                                    بالمكان</button>

                            </div>
                        </div>
                        <!-- btn delete -->
                        <div class="btn_delete">
                            <div class=" b_delete col-md-12 col-sm-12">
                                <button id="delete_absence" style="width: 100%;font-size: 20px;"
                                    class="col-md-12 col-sm-12 mt-3 btn btn-outline-danger b_search">حذف كل أيام
                                    الغياب</button>

                            </div>
                            <div class=" b_delete col-md-12 col-sm-12">
                                <button id="delete_rest" style="width: 100%;font-size: 20px;"
                                    class="col-md-12 col-sm-12 mt-3 btn btn-outline-danger b_search">حذف كل أيام
                                    الاجازة</button>

                            </div>

                        </div>






                    </div>
                    <!-- </form> -->



                </div>
                <div class="row">
                    <div style="overflow: auto;" class="col-sm-12">
                        <table class="table mt-5 table-striped ">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">الاسم</th>
                                    <th scope="col">الوظيفة</th>
                                    <th scope="col">الحضور</th>
                                    <th scope="col">مكان التواجد</th>
                                    <th scope="col">عدد أيام الغياب</th>
                                    <th scope="col">عدد أيام الاجازة الكلي</th>
                                    <th scope="col">العودة من الاجازة</th>
                                    <th scope="col">شيفت</th>
                                    <th scope="col">القسم</th>
                                    <th scope="col">تعديل</th>
                                    <th scope="col">حذف</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td><a style="text-decoration: none;" href="Employee's_personal_page.html">محمد صبري محمود</a></td>
                                    <td>مهندس</td>
                                    <td>أجازة</td>
                                    <td>الشركة</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>09/09/2024</td> <!-- Back Date -->
                                    <td></td>
                                    <td>مقر الشركة</td>
                                    <td>
                                        <div id="upp" class="btn btn-primary edit-btn upp">تعديل</div>
                                    </td>
                                    <td>
                                        <div class="btn btn-danger">حذف</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td><a style="text-decoration: none;" href="Employee's_personal_page.html">محمد صبري محمود</a></td>
                                    <td>مهندس</td>
                                    <td>تواجد</td>
                                    <td>اللوتس</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td></td>
                                    <td>مسائى</td>
                                    <td>مقر الشركة</td>
                                    <td>
                                        <div class="btn btn-primary edit-btn upp">تعديل</div>
                                    </td>
                                    <td>
                                        <div class="btn btn-danger">حذف</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td><a style="text-decoration: none;" href="Employee's_personal_page.html">محمود معتصم</a></td>
                                    <td>سوشيال ميديا</td>
                                    <td>تواجد</td>
                                    <td>الشركة</td>
                                    <td>2</td>
                                    <td>5</td>
                                    <td></td>
                                    <td></td>
                                    <td>مقر الشركة</td>
                                    <td>
                                        <div class="btn btn-primary edit-btn upp">تعديل</div>
                                    </td>
                                    <td>
                                        <div class="btn btn-danger">حذف</div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>


                </div>
            </div>








            <!-- button to move up -->
            <button title="top page" id="btn"><i class="fa-solid fa-arrow-up"></i></button>


            <!-- footer -->
            <footer class="text-center bg-body-tertiary">

                <div
                    style="width: 80%;height: 1px;background-color: rgb(177, 179, 179);margin: auto;margin-bottom: 80px;">

                </div>
                <div class=" end">
                    <img style="height: 40px;width: 50px;padding-left: 10px;"
                        src="../images/saqr_logo-removebg-preview.png" alt="">
                    <h4>شركة صقر القاهرة</h4>

                </div>

                <!-- Grid container -->
                <div class="container pt-4">
                    <section class="mb-4">
                        <!-- الصفحة الرئيسية -->
                        <a data-mdb-ripple-init
                            class="btn btn-link btn-floating btn-lg text-body m-1 footer_link fo_link"
                            href="Staff_Management.html" role="button" data-mdb-ripple-color="dark">الصفحة
                            الرئيسية</i></a>

                        <!-- عن الشركة -->
                        <a data-mdb-ripple-init
                            class="btn btn-link btn-floating btn-lg text-body m-1 footer_link fo_link"
                            href="../about_us.html" role="button" data-mdb-ripple-color="dark">عن الشركة</a>

                        <!-- تواصل معنا -->
                        <a data-mdb-ripple-init
                            class="btn btn-link btn-floating btn-lg text-body m-1 footer_link fo_link"
                            href="../contact.html" role="button" data-mdb-ripple-color="dark">تواصل معنا</a>


                    </section>
                    <!-- Section: Social media -->
                </div>
                <!-- Grid container -->

                <!-- Copyright -->
                <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
                    جميع الحقوق محفوظة لشركة صقر القاهرة 2024 © </div>
                <!-- Copyright -->
            </footer>
            <!-- footer -->

            </script>
            <!-- jQuery CDN -->
            <script src="../js/jquery-3.7.1.min.js"></script>

            <!-- Popper.js for Bootstrap (if using Bootstrap 5) -->
            <script src="../js/popper.min.js"></script>

            <!-- Bootstrap 5 JS -->
            <script src="../js/bootstrap.bundle.min.js"></script>


            <script>
                function redirectToSubmitcomplaint() {
                    window.location.href = 'Submit_complaint.html';
                }
                function redirectTohomeemployee() {
                    window.location.href = 'supervisor_Home_Page.html';
                }
                function redirectTostaffmanagement() {
                    window.location.href = 'Staff_Management.html';
                }


               
                $(document).ready(function () {
                    var profileUserData = {
                        username: "user",
                        email: "user@gmail.com"
                    };

                    // Set dynamic content for profile icon popover
                    $('#profileIcon').attr('data-bs-content', '<strong>الأسم:</strong> ' + profileUserData.username + '<br><strong>البريد الاكتروني:</strong> ' + profileUserData.email);

                    // Initialize popover (Bootstrap 5 syntax)
                    var popoverTrigger = new bootstrap.Popover(document.getElementById('profileIcon'), {
                        html: true,
                        placement: 'bottom',
                        trigger: 'hover'
                    });
                });
                // function to make rest disabled if hedor=تواجد او غياب او مأمورية
                function toggleInput(select) {
                    var inputBack = document.querySelector('input[name="back"]'); // Back input
                    var inputRest = document.querySelector('input[name="rest"]'); // Rest input
                    var inputAbsence = document.querySelector('input[name="absence"]'); // Absence input

                    // Disable or enable inputs based on select value
                    if (select.value === 'ex' || select.value === 'mam') {
                        inputBack.disabled = true;  // Disable 'back' input
                        inputRest.disabled = true;  // Disable 'rest' input
                        inputAbsence.disabled = true; // Disable 'absence' input
                    } else if (select.value === 'abs') {
                        inputBack.disabled = true;  // Keep 'back' input disabled
                        inputRest.disabled = true;  // Keep 'rest' input disabled
                        inputAbsence.disabled = false; // Enable 'absence' input
                    } else if (select.value === 're') {
                        inputBack.disabled = false;  // Keep 'back' input disabled

                    }
                    else {
                        // Enable all inputs if a different option is selected
                        inputBack.disabled = false;
                        inputRest.disabled = false;
                        inputAbsence.disabled = false;
                    }
                }





                // show button تعديل after click on each button in the table

                document.addEventListener('DOMContentLoaded', function () {
                    let up_button = document.getElementById('up_button'); // Gets the single element with the ID 'up_button'
                    let uups = document.getElementsByClassName('upp'); // Gets all elements with the class 'upp'

                    // Add event listeners to each 'upp' button
                    for (let i = 0; i < uups.length; i++) {
                        uups[i].onclick = function () {
                            console.log("Update button clicked");
                            // Show the up_button
                            up_button.classList.remove('none');
                            up_button.classList.add('block');
                        };
                    }

                    // Add event listener to the 'up_button'
                    up_button.onclick = function (event) {
                        event.preventDefault(); // Prevent default action if necessary
                        location.reload();
                        up_button.classList.add('none'); // Hide the up_button
                    };
                });



                // ******************************
                // Function to handle the edit button click
                // Function to handle the edit button click
                document.querySelectorAll('.edit-btn').forEach(function (button) {
                    button.addEventListener('click', function (e) {
                        // Find the closest row and extract its data
                        const row = e.target.closest('tr');
                        const name = row.cells[1].textContent.trim();
                        const job = row.cells[2].textContent.trim();
                        const attendance = row.cells[3].textContent.trim();
                        const location = row.cells[4].textContent.trim();
                        const absenceDays = row.cells[5].textContent.trim();
                        const restDays = row.cells[6].textContent.trim();
                        const backDate = row.cells[7].textContent.trim(); // Extract back date
                        const shift = row.cells[8].textContent.trim(); // Assuming shift is in the 9th cell
                        const department = row.cells[9].textContent.trim(); // Extract department

                        // Populate form fields
                        document.getElementById('name').value = name;
                        document.getElementById('attendance').value = mapAttendance(attendance);
                        document.getElementById('location').value = mapLocation(location);
                        document.getElementById('job').value = mapJob(job);
                        document.querySelector('input[name="absence"]').value = absenceDays;
                        document.querySelector('input[name="rest"]').value = restDays;

                        // Set the back date (ensure format is compatible)
                        const formattedDate = formatDate(backDate); // Format the date if necessary
                        document.querySelector('input[name="back"]').value = formattedDate; // Set the back date input

                        // Set the shift value
                        document.querySelector('select[name="sheft"]').value = mapShift(shift);
                        // Set the department value
                        document.querySelector('select[name="department"]').value = mapDepartment(department); // Assuming you have a select for department

                        // Call toggleInput to set the correct state for the inputs
                        toggleInput(document.getElementById('attendance')); // Update inputs based on attendance value

                        // Scroll to the form for user visibility
                        document.querySelector('.row').scrollIntoView({ behavior: 'smooth' });
                    });
                });

                // Function to handle the delete button click
                document.querySelectorAll('.btn-danger').forEach(function (button) {
                    button.addEventListener('click', function (e) {
                        const row = e.target.closest('tr');
                        row.remove(); // Remove the entire row

                        // Reorder the sequence after row deletion
                        reorderSequence();
                    });
                });

                // Function to reorder the sequence in the # column
                function reorderSequence() {
                    const rows = document.querySelectorAll('tbody tr');
                    rows.forEach((row, index) => {
                        row.cells[0].textContent = index + 1; // Update the sequence column
                    });
                }

                // Function to format the date to YYYY-MM-DD for input[type=date]
                function formatDate(dateString) {
                    const parts = dateString.split('/');
                    if (parts.length === 3) {
                        return `${parts[2]}-${parts[1]}-${parts[0]}`; // Convert to YYYY-MM-DD
                    }
                    return '';
                }

                // Function to map shift text to select value
                function mapShift(shift) {
                    switch (shift) {
                        case 'صباحي': return '1';
                        case 'مسائى': return '2';
                        default: return '';
                    }
                }

                // Function to map department text to select value
                function mapDepartment(department) {
                    switch (department) {
                        case 'مقر الشركة': return '1';
                        case 'الشئون الإدارية': return '2';
                        case 'مديري ومشرفي التشغيل': return '3';
                        case 'أفراد التشغيل': return '4';
                        case 'مديرى الأمن': return '5';
                        case 'مشرفى الأمن': return '6';
                        case 'أفراد الأمن': return '7';
                        default: return '';
                    }
                }

                // Helper function to map attendance text to select value
                function mapAttendance(attendance) {
                    switch (attendance) {
                        case 'تواجد': return 'ex';
                        case 'غياب': return 'abs';
                        case 'مأمورية': return 'mam';
                        case 'أجازة': return 're';
                        default: return '';
                    }
                }

                // Helper function to map location text to select value
                function mapLocation(location) {
                    switch (location) {
                        case 'الشركة': return '1';
                        case 'اللوتس': return '2';
                        case 'مجرى العيون': return '3';
                        default: return '';
                    }
                }

                // Helper function to map job text to select value
                function mapJob(job) {
                    switch (job) {
                        case 'محاسب': return '1';
                        case 'مهندس': return '2';
                        case 'HR': return '3';
                        case 'سوشيال ميديا': return '4';
                        default: return '';
                    }
                }



                /* 1. Proloder */
                $(window).on('load', function () {
                    $('#preloader-active').delay(450).fadeOut('slow');
                    $('body').delay(450).css({
                        'overflow': 'visible'
                    });
                });




            </script>






</body>

</html>